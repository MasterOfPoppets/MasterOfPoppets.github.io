<!DOCTYPE html><html lang="en" data-reactid=".16yott4mlts" data-react-checksum="-1083142625"><head data-reactid=".16yott4mlts.0"><meta charset="UTF-8" data-reactid=".16yott4mlts.0.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge" data-reactid=".16yott4mlts.0.1"/><meta name="viewport" content="width=device-width, initial-scale=1" data-reactid=".16yott4mlts.0.2"/><meta name="description" content="" data-reactid=".16yott4mlts.0.3"/><meta name="author" content="Gareth Hughes" data-reactid=".16yott4mlts.0.4"/><title data-reactid=".16yott4mlts.0.5">Quantum Web Development</title><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Italiana&amp;subset=latin" data-reactid=".16yott4mlts.0.6"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous" data-reactid=".16yott4mlts.0.7"/><link rel="stylesheet" href="/css/main.css" data-reactid=".16yott4mlts.0.8"/></head><body data-reactid=".16yott4mlts.1"><header class="header" data-reactid=".16yott4mlts.1.0"><nav class="navbar navbar-default navbar-fixed-top" data-reactid=".16yott4mlts.1.0.0"><div class="container-fluid" data-reactid=".16yott4mlts.1.0.0.0"><div class="navbar-header" data-reactid=".16yott4mlts.1.0.0.0.0"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false" data-reactid=".16yott4mlts.1.0.0.0.0.0"><span class="sr-only" data-reactid=".16yott4mlts.1.0.0.0.0.0.0">Toggle navigation</span><span class="icon-bar" data-reactid=".16yott4mlts.1.0.0.0.0.0.1"></span><span class="icon-bar" data-reactid=".16yott4mlts.1.0.0.0.0.0.2"></span><span class="icon-bar" data-reactid=".16yott4mlts.1.0.0.0.0.0.3"></span></button><a class="navbar-brand glyphicon glyphicon-home home-menu-link" aria-hidden="true" href="/" data-reactid=".16yott4mlts.1.0.0.0.0.1"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" data-reactid=".16yott4mlts.1.0.0.0.1"><ul class="nav navbar-nav navbar-right" data-reactid=".16yott4mlts.1.0.0.0.1.0"><li data-reactid=".16yott4mlts.1.0.0.0.1.0.0"><a class="home-menu-link" href="/about" data-reactid=".16yott4mlts.1.0.0.0.1.0.0.0">About</a></li><li data-reactid=".16yott4mlts.1.0.0.0.1.0.1"><a class="home-menu-link" href="/portfolio" data-reactid=".16yott4mlts.1.0.0.0.1.0.1.0">Work</a></li><li data-reactid=".16yott4mlts.1.0.0.0.1.0.2"><a class="home-menu-link" href="/blog" data-reactid=".16yott4mlts.1.0.0.0.1.0.2.0">Blog</a></li></ul></div></div></nav></header><div class="portfolio-content" data-reactid=".16yott4mlts.1.1"><div class="jumbotron" data-reactid=".16yott4mlts.1.1.0"><div class="container" data-reactid=".16yott4mlts.1.1.0.0"><h1 data-reactid=".16yott4mlts.1.1.0.0.0">Markdown Blogging with Node.JS and Firebase</h1></div></div><div class="container" data-reactid=".16yott4mlts.1.1.1"><div class="row" data-reactid=".16yott4mlts.1.1.1.0"><div class="col-xs-12 col-md-8 col-md-offset-2" data-reactid=".16yott4mlts.1.1.1.0.0"><article data-reactid=".16yott4mlts.1.1.1.0.0.0"><p data-reactid=".16yott4mlts.1.1.1.0.0.0.0">For the majority of this week I have been focusing on adding a rudimentary blogging engine to my site, allowing me to post updates such as this.</p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.1"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.1.0">There are many different options out there for blogging, from small but powerful Node.js modules such as</span><a href="https://github.com/creationix/wheat" data-reactid=".16yott4mlts.1.1.1.0.0.0.1.1"> Wheat</a><span data-reactid=".16yott4mlts.1.1.1.0.0.0.1.2"> to plugin heavy behemoths like Wordpress. However, since developing this site has partly been a learning exercise, I thought I would have a go at developing my own blogging engine - one that would allow me to customise to my own requirements as I went along.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.2">So where to start?</p><h3 data-reactid=".16yott4mlts.1.1.1.0.0.0.3">Phase 1: A content directory</h3><p data-reactid=".16yott4mlts.1.1.1.0.0.0.4"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.4.0">First of all, I thought my site would contain a structured </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.4.1">content</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.4.2"> folder along the lines of this:</span></p><div data-reactid=".16yott4mlts.1.1.1.0.0.0.5">loading...</div><p data-reactid=".16yott4mlts.1.1.1.0.0.0.6"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.6.0">Each post would be in its own separate folder, corresponding to the link address on the site. This folder would contain a `post.json` file containing some metadata such as title and date, and `post.markdown`. This file would contain the actual post and be written using </span><a href="http://daringfireball.net/projects/markdown/" data-reactid=".16yott4mlts.1.1.1.0.0.0.6.1">Markdown</a><span data-reactid=".16yott4mlts.1.1.1.0.0.0.6.2">, allowing me to intuitively write posts that get rendered into beautiful HTML.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.7">This first approach ended up being quite easy - firstly get Node to read the folder structure when you first hit the blog page, and generate a nice list of &quot;links&quot; to pass to the Jade template. Clicking on a link would then render a new Jade template with the specific post content in.</p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.8"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.8.0">Great - but theres a problem. At the moment my site is deployed on </span><a href="https://www.heroku.com/" data-reactid=".16yott4mlts.1.1.1.0.0.0.8.1">Heroku </a><span data-reactid=".16yott4mlts.1.1.1.0.0.0.8.2">meaning that any content update would require a git push and restarting of the app. So the next step, take what I&#x27;ve learnt but extract the content to somewhere else.</span></p><h3 data-reactid=".16yott4mlts.1.1.1.0.0.0.9">Phase 2: Remote content</h3><p data-reactid=".16yott4mlts.1.1.1.0.0.0.a"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.a.0">In using a remote location for my content, my thoughts first turned to Wheat, and storing the content in a file structure as before, but in a seperate Git repository. However, lately I have been playing around with</span><a href="https://www.firebase.com" data-reactid=".16yott4mlts.1.1.1.0.0.0.a.1"> Firebase</a><span data-reactid=".16yott4mlts.1.1.1.0.0.0.a.2">, and so I decided to have a bit of fun with that instead. It also allows much more flexibility - allowing me to post new content virtually anywhere.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.b">Expanding the data structure from my first attempt, my Firebase now looks something a little like this:</p><div data-reactid=".16yott4mlts.1.1.1.0.0.0.c">loading...</div><p data-reactid=".16yott4mlts.1.1.1.0.0.0.d"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.d.0">Each new entry is added to the </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.d.1">blogEntries</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.d.2"> child, keeping it nicely organised and allowing the use of specific security rules. The entry is keyed by its URL, mainly for readability purposes at the moment, but it may be handy later on. Each entry again contains things like date, title and the actual post, again written in Markdown. It also features a new </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.d.3">stub</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.d.4"> - which will be used as a short summary when viewing all the blog entries before choosing one to drill into. This again is written in Markdown.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.e"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.e.0">Now when a user visits the blog page, Node starts up a Firebase </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.e.1">child_added</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.e.2"> listener, populating the list of current blog entries, and then sticks them into the existing </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.e.3">blog.jade</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.e.4"> template.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.f">Drilling down into a particular blog post does a similar thing, except it registers...</p><div data-reactid=".16yott4mlts.1.1.1.0.0.0.g">loading...</div><p data-reactid=".16yott4mlts.1.1.1.0.0.0.h"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.h.0">on the particular child entry being viewed - after all, we are only interested in getting the entry once! This is then placed into the existing </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.h.1">blogEntry.jade</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.h.2">.</span></p><h3 data-reactid=".16yott4mlts.1.1.1.0.0.0.i">Phase 3: Content management</h3><p data-reactid=".16yott4mlts.1.1.1.0.0.0.j">Now that my Firebase was in place and ready to be used by the site, I needed a nicer way of actually writing the data, as opposed to directly modifying it through the Firebase UI. I wanted to write my posts in Markdown, edit the post metadata and then have them sent directly to Firebase.</p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.k"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.k.0">Enter </span><a href="https://github.com/MasterOfPoppets/blog-post-author" data-reactid=".16yott4mlts.1.1.1.0.0.0.k.1">blog-post-author</a><span data-reactid=".16yott4mlts.1.1.1.0.0.0.k.2">.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.l"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.0">This is currently a simple program, again written with Node.js, that basically scans a </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.1">content</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.2"> folder for three files: </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.3">post.json</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.4">, </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.5">post.markdown</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.6"> and </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.7">stub.markdown</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.8">. Once it has these it fires off a </span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.9">setWithPrioriy</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.a"> call to Firebase using</span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.l.b">Firebase.ServerValue.TIMESTAMP</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.l.c">, allowing me to order my posts chronologically.</span></p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.m"><span data-reactid=".16yott4mlts.1.1.1.0.0.0.m.0">Currently this program is very basic - editing data essentially involves ensuring the URL in the</span><code data-reactid=".16yott4mlts.1.1.1.0.0.0.m.1">post.json</code><span data-reactid=".16yott4mlts.1.1.1.0.0.0.m.2"> file is the same. Going back and editing more historical entries would definitely prove more annoying. However, the program does what I want to do, and I already have some great ideas of how to expand it!</span></p><h3 data-reactid=".16yott4mlts.1.1.1.0.0.0.n">Phase 4: The future is... Angular</h3><p data-reactid=".16yott4mlts.1.1.1.0.0.0.o">Currently this is all being done on the server-side by Node. However, Firebase excels at running entirely on the client-side, so my next step with the blogging on this site is to move entirely to using AngularJS - in fact the only thing that will remain will be that my Node server will serve Jade templates as before, though these will be modified to use Angular directives instead of being passed in Jade variables.</p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.p">I also want to work on the blog-post-author project a bit, making it a bit more user friendly. I have a volunteer client who will be using this to post blog entries to the site we are developing and anything that makes his life easier is going to be great.</p><p data-reactid=".16yott4mlts.1.1.1.0.0.0.q">Watch this space...!</p></article></div></div></div></div><script src="https://fb.me/react-0.14.6.min.js" data-reactid=".16yott4mlts.1.2"></script><script src="https://fb.me/react-dom-0.14.6.min.js" data-reactid=".16yott4mlts.1.3"></script><script src="/bundle.js" data-reactid=".16yott4mlts.1.4"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" data-reactid=".16yott4mlts.1.5"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous" data-reactid=".16yott4mlts.1.6"></script></body></html>